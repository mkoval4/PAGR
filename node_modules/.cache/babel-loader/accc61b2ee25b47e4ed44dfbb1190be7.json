{"ast":null,"code":"import isNil from 'lodash/isNil';\nimport isArray from 'lodash/isArray';\nimport isString from 'lodash/isString';\nimport compact from 'lodash/compact';\nimport moment from 'moment';\nexport var TIME_FORMAT = {\n  24: 'HH:mm',\n  AMPM: 'hh:mm A',\n  ampm: 'hh:mm a'\n};\n/** Parse string, moment, Date.\r\n *\r\n * Return unedfined on invalid input.\r\n */\n\nexport function parseValue(value, dateFormat, localization) {\n  if (!isNil(value) && !isNil(dateFormat)) {\n    var date = moment(value, dateFormat);\n\n    if (date.isValid()) {\n      date.locale(localization);\n      return date;\n    }\n  }\n}\n/** Parse string, moment, Date, string[], moment[], Date[].\r\n *\r\n * Return array of moments. Returned value contains only valid moments.\r\n * Return undefined if none of the input values are valid.\r\n */\n\nexport function parseArrayOrValue(data, dateFormat, localization) {\n  if (isArray(data)) {\n    var parsed = compact(data.map(function (item) {\n      return parseValue(item, dateFormat, localization);\n    }));\n\n    if (parsed.length > 0) {\n      return parsed;\n    }\n  }\n\n  var parsedValue = parseValue(data, dateFormat, localization);\n  return parsedValue && [parsedValue];\n}\n/** Create moment.\r\n *\r\n * Creates moment using `dateParams` or `initialDate` arguments (if provided).\r\n * Precedense order: dateParams -> initialDate -> default value\r\n */\n\nexport function getInitializer(context) {\n  var dateParams = context.dateParams,\n      initialDate = context.initialDate,\n      dateFormat = context.dateFormat,\n      localization = context.localization;\n\n  if (dateParams) {\n    var parsedParams = localization ? moment(dateParams).locale(localization) : moment(dateParams);\n\n    if (parsedParams.isValid()) {\n      return parsedParams;\n    }\n  }\n\n  var parsedInitialDate = parseValue(initialDate, dateFormat, localization);\n\n  if (parsedInitialDate) {\n    return parsedInitialDate;\n  }\n\n  return localization ? moment().locale(localization) : moment();\n}\n/** Creates moment instance from provided value or initialDate.\r\n *  Creates today by default.\r\n */\n\nexport function buildValue(value, initialDate, localization, dateFormat, defaultVal) {\n  if (defaultVal === void 0) {\n    defaultVal = moment();\n  }\n\n  var valueParsed = parseValue(value, dateFormat, localization);\n\n  if (valueParsed) {\n    return valueParsed;\n  }\n\n  var initialDateParsed = parseValue(initialDate, dateFormat, localization);\n\n  if (initialDateParsed) {\n    return initialDateParsed;\n  }\n\n  var _defaultVal = defaultVal ? defaultVal.clone() : defaultVal;\n\n  if (_defaultVal) {\n    _defaultVal.locale(localization);\n  }\n\n  return _defaultVal;\n}\nexport function dateValueToString(value, dateFormat, locale) {\n  if (isString(value)) {\n    return value;\n  }\n\n  if (moment.isMoment(value)) {\n    var _value = value.clone();\n\n    _value.locale(locale);\n\n    return _value.format(dateFormat);\n  }\n\n  var date = moment(value, dateFormat);\n\n  if (date.isValid()) {\n    date.locale(locale);\n    return date.format(dateFormat);\n  }\n\n  return '';\n}\n\nfunction cleanDate(inputString, dateFormat) {\n  var formattedDateLength = moment().format(dateFormat).length;\n  return inputString.trim().slice(0, formattedDateLength);\n}\n/**\r\n * Extract start and end dates from input string.\r\n * Return { start: Moment|undefined, end: Moment|undefined }\r\n * @param {string} inputString Row input string from user\r\n * @param {string} dateFormat Moment formatting string\r\n * @param {string} inputSeparator Separator for split inputString\r\n */\n\n\nexport function parseDatesRange(inputString, dateFormat, inputSeparator) {\n  if (inputString === void 0) {\n    inputString = '';\n  }\n\n  if (dateFormat === void 0) {\n    dateFormat = '';\n  }\n\n  if (inputSeparator === void 0) {\n    inputSeparator = ' - ';\n  }\n\n  var dates = inputString.split(inputSeparator).map(function (date) {\n    return cleanDate(date, dateFormat);\n  });\n  var result = {};\n  var start;\n  var end;\n  start = moment(dates[0], dateFormat);\n\n  if (dates.length === 2) {\n    end = moment(dates[1], dateFormat);\n  }\n\n  if (start && start.isValid()) {\n    result.start = start;\n  }\n\n  if (end && end.isValid()) {\n    result.end = end;\n  }\n\n  return result;\n}","map":null,"metadata":{},"sourceType":"module"}